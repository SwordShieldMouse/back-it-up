#!/bin/bash
#SBATCH --job-name=Swimmer_rkl_rpm_mul
#SBATCH --output=./logs/Swimmer/rkl/%A%a.out
#SBATCH --error=./logs/Swimmer/rkl/%A%a.err

#SBATCH --array=0-3017:4%200

#SBATCH --cpus-per-task=1
#SBATCH --time=12:00:00
#SBATCH --mem-per-cpu=8000M

#SBATCH --account=rrg-whitem

ENV_NAME=Swimmer-v2
AGENT_NAME=reverse_kl_rpm_big

ERROR_RUNS=(1760 1920 2080 2240 2560 2720 2880 3040 3200 3360 3520 3680 3840 4000 4160 4320 4480 4640 1601 1761 1921 2081 2241 2401 2561 2721 2881 3041 3201 3361 3521 3681 3841 4001 4161 4321 4481 4641 1602 1762 1922 2082 2242 2402 2562 2722 2882 3042 3202 3362 3522 3682 3842 4002 4162 4322 4482 4642 1603 1763 1923 2083 2243 2403 2563 2723 2883 3043 3203 3363 3523 3683 3843 4003 4163 4323 4483 4643 1604 1764 1924 2084 2244 2404 2564 2724 3044 3204 3364 3524 3684 3844 4004 4164 4324 4484 4644 1605 1765 1925 2085 2245 2405 2565 2725 2885 3045 3205 3365 3525 3685 3845 4005 4165 4325 4485 4645 1606 1766 1926 2086 2246 2406 2566 2726 2886 3046 3206 3366 3526 3686 3846 4006 4166 4326 4486 4646 1607 1767 1927 2247 2407 2567 2727 2887 3047 3207 3367 3527 3687 3847 4007 4167 4327 4487 4647 1608 1768 1928 2088 2248 2408 2568 2728 2888 3048 3208 3368 3688 3848 4008 4168 4328 4488 4648 1609 1769 1929 2089 2249 2409 2729 2889 3049 3209 3369 3529 3689 3849 4009 4169 4329 4489 4649 1610 1770 1930 2090 2250 2410 2570 2730 2890 3050 3210 3370 3530 3690 3850 4010 4170 4330 4490 4650 1611 1771 1931 2091 2251 2411 2571 2731 2891 3211 3371 3531 3691 3851 4011 4171 4331 4491 4651 1612 1772 1932 2092 2252 2412 2572 2732 2892 3052 3212 3372 3532 3692 3852 4012 4172 4332 4492 4652 1613 1773 1933 2093 2253 2413 2573 2733 2893 3213 3373 3533 3693 3853 4013 4173 4333 4493 4653 1614 1774 1934 2254 2414 2574 2734 2894 3054 3214 3374 3534 3694 3854 4174 4334 4494 4654 1615 1775 1935 2095 2255 2415 2575 2735 2895 3055 3215 3375 3535 3695 3855 4015 4175 4335 4495 4655 1616 1776 1936 2096 2256 2416 2576 2736 2896 3056 3216 3376 3536 3696 3856 4016 4176 4336 4496 4656 1617 1777 1937 2257 2417 2577 2737 2897 3217 3377 3537 3697 3857 4017 4177 4337 4657 1618 1778 1938 2098 2258 2418 2578 2738 2898 3058 3218 3378 3698 3858 4018 4178 4338 4498 4658 1619 1779 1939 2099 2259 2419 2579 2739 2899 3059 3219 3379 3539 3699 3859 4019 4179 4339 4499 4659 1620 1780 1940 2100 2260 2420 2740 2900 3060 3220 3380 3540 3700 3860 4020 4180 4340 4500 4660 1621 1781 1941 2101 2261 2421 2581 2741 2901 3061 3221 3381 3541 3701 4021 4181 4341 4501 4661 1622 1782 1942 2262 2422 2582 2742 2902 3062 3222 3382 3542 3702 3862 4022 4182 4342 4662 1623 1783 1943 2103 2263 2423 2583 2743 2903 3063 3383 3543 3703 3863 4023 4183 4343 4503 4663 1624 1784 1944 2104 2264 2424 2584 2744 3064 3224 3384 3544 3704 3864 4024 4184 4344 4664 1625 1785 1945 2105 2265 2425 2585 2745 2905 3225 3385 3545 3705 3865 4025 4185 4345 4505 4665 1626 1786 2106 2586 2746 2906 3066 3226 3546 3706 3866 4026 4186 4346 4506 4666 1627 1787 1947 2107 2267 2427 2587 2747 2907 3067 3227 3387 3707 3867 4027 4187 4347 4507 4667 1628 1788 1948 2108 2268 2428 2588 2748 2908 3068 3228 3388 3548 3708 3868 4028 4188 4348 4508 4668 1629 1789 1949 2109 2429 2589 2749 2909 3069 3389 3709 3869 4029 4189 4349 4509 4669 1630 1790 1950 2110 2270 2590 2750 2910 3070 3230 3390 3550 3710 3870 4030 4190 4350 4510 4670 1631 1791 1951 2271 2431 2591 2911 3231 3391 3551 3711 3871 4031 4191 4351 4511 4671 1792 1952 2112 2272 2432 2592 2752 2912 3072 3232 3392 3552 3712 3872 4032 4192 4352 4512 4672 1633 1793 1953 2113 2273 2433 2593 2753 2913 3073 3233 3393 3553 3713 3873 4033 4193 4353 4513 4673 1634 1794 1954 2274 2434 2594 2754 2914 3234 3394 3714 3874 4194 4514 4674 1635 1795 1955 2115 2275 2435 2595 2755 2915 3075 3235 3395 3555 3715 3875 4035 4355 4515 4675 1636 1796 1956 2116 2276 2436 2596 2756 2916 3076 3236 3396 3556 3716 3876 4036 4196 4356 4516 4676 1637 1797 1957 2117 2277 2437 2597 2757 2917 3077 3237 3397 3557 3717 3877 4037 4197 4357 4517 4677 1638 1798 1958 2118 2278 2438 2598 2758 2918 3078 3238 3398 3558 3718 3878 4038 4198 4358 4518 4678 1639 1799 1959 2119 2279 2439 2599 2759 2919 3079 3399 3559 3719 3879 4039 4199 4359 4519 4679 1640 1800 1960 2120 2280 2600 2760 2920 3080 3240 3400 3560 3720 3880 4040 4200 4360 4520 4680 1641 1801 1961 2121 2281 2441 2601 2761 2921 3081 3241 3401 3721 3881 4041 4201 4361 4681 1642 1802 1962 2122 2282 2442 2602 2762 2922 3082 3402 3562 3722 3882 4042 4202 4522 4682 1643 1803 1963 2283 2443 2603 2763 2923 3083 3243 3403 3563 3723 3883 4043 4203 4363 4523 4683 1644 1804 1964 2124 2284 2444 2764 3244 3404 3564 3724 4044 4204 4364 4524 4684 1645 1805 1965 2125 2285 2605 2765 2925 3085 3245 3405 3565 3725 4045 4205 4365 4685 1646 1806 1966 2126 2286 2446 2606 2766 2926 3086 3246 3406 3566 3726 3886 4046 4206 4366 4526 4686 1647 1807 1967 2127 2287 2447 2607 2767 2927 3087 3247 3407 3727 3887 4047 4207 4367 4527 4687 1648 1808 1968 2128 2288 2448 2608 2768 2928 3088 3248 3408 3568 3728 3888 4048 4208 4368 4688 1649 1809 1969 2129 2289 2449 2609 2769 2929 3089 3249 3409 3569 3889 4049 4209 4369 4529 4689 1650 1970 2290 2450 2610 2770 2930 3090 3250 3410 3730 3890 4050 4210 4370 4530 4690 1651 1811 1971 2131 2291 2451 2611 2931 3091 3251 3571 3731 3891 4051 4211 4371 4531 4691 1652 1812 1972 2132 2292 2452 2612 2772 2932 3092 3252 3412 3572 3892 4052 4212 4372 4532 4692 1653 1813 1973 2133 2293 2453 2613 2773 2933 3093 3253 3413 3573 3733 3893 4053 4213 4373 4533 4693 1654 1974 2134 2294 2454 2614 2774 2934 3094 3254 3414 3574 3734 4054 4214 4374 4534 4694 1655 1815 1975 2135 2295 2455 2615 2775 2935 3095 3255 3415 3735 3895 4055 4215 4375 4535 4695 1656 1816 1976 2136 2296 2456 2616 2776 2936 3096 3256 3416 3576 3896 4216 4376 4536 4696 1657 1817 1977 2137 2457 2617 2777 3097 3257 3417 3577 3737 3897 4057 4217 4377 4697 1658 1818 1978 2138 2298 2458 2618 2778 3098 3258 3418 3738 3898 4378 4538 4698 1659 1819 1979 2139 2299 2459 2619 2779 2939 3099 3259 3419 3579 4219 4379 4539 4699 1660 1820 1980 2140 2460 2620 2780 2940 3100 3260 3420 3580 3740 3900 4060 4220 4380 4540 4700 1661 1821 1981 2141 2301 2461 2621 2781 2941 3101 3261 3421 3581 3741 3901 4061 4221 4381 4541 4701 1662 1822 1982 2142 2302 2462 2622 2782 2942 3102 3262 3422 3582 3742 3902 4062 4222 4542 4702 1663 1823 1983 2143 2303 2463 2623 2783 2943 3423 3583 3743 3903 4063 4223 4383 4543 4703 1824 1984 2144 2304 2464 2624 2784 2944 3264 3424 3584 3744 3904 4224 4384 4544 4704 1665 1825 2145 2305 2465 2625 2785 2945 3105 3265 3425 3585 3745 3905 4065 4385 4705 1666 1826 1986 2146 2306 2466 2626 2786 2946 3106 3426 3746 3906 4066 4226 4386 4546 4706 1667 1827 1987 2147 2307 2467 2627 2787 2947 3107 3267 3427 3587 3747 3907 4067 4227 4387 4547 4707 1668 1828 1988 2148 2308 2628 2788 2948 3108 3268 3428 3588 3748 3908 4068 4228 4388 4548 4708 1829 1989 2149 2309 2469 2789 2949 3109 3269 3429 3589 3749 3909 4069 4229 4389 4549 4709 1830 1990 2150 2310 2470 2630 2790 2950 3110 3430 3590 3750 3910 4070 4230 4390 4550 4710 1671 1831 1991 2151 2311 2471 2631 2791 2951 3111 3271 3431 3591 3751 3911 4071 4231 4391 4551 4711 1672 1832 1992 2152 2312 2472 2632 2792 2952 3112 3272 3432 3592 3752 3912 4072 4232 4392 4552 1673 1833 1993 2153 2313 2473 2633 2793 2953 3113 3273 3433 3593 3753 3913 4073 4393 4553 4713 1674 1834 1994 2154 2314 2474 2634 2794 2954 3114 3274 3434 3754 3914 4074 4394 4554 4714 1675 1835 1995 2155 2315 2475 2635 2795 2955 3115 3275 3435 3595 3755 3915 4075 4235 4395 4555 4715 1676 1996 2156 2316 2476 2636 2796 2956 3116 3276 3436 3596 3756 3916 4076 4236 4396 4556 4716 1677 1837 1997 2157 2477 2637 2797 2957 3117 3277 3437 3597 3757 3917 4077 4237 4397 4557 4717 1838 1998 2158 2318 2478 2638 2798 3118 3278 3598 3758 3918 4078 4238 4398 4558 4718 1679 1839 1999 2159 2319 2479 2639 2799 2959 3119 3279 3439 3599 3759 3919 4079 4239 4399 4559 4719 1680 1840 2000 2160 2320 2480 2640 2800 2960 3120 3280 3440 3600 3760 3920 4240 4400 4560 4720 1681 1841 2001 2161 2321 2641 2801 2961 3121 3281 3441 3601 3761 3921 4081 4241 4401 4561 4721 1682 1842 2002 2162 2322 2642 2802 2962 3122 3282 3442 3762 3922 4082 4242 4402 4562 4722 1683 1843 2003 2163 2323 2483 2643 2803 2963 3123 3283 3443 3603 3763 3923 4083 4243 4403 4563 4723 1684 1844 2004 2164 2644 2804 2964 3124 3284 3444 3924 4084 4244 4404 4564 4724 1685 1845 2005 2165 2325 2485 2645 2805 2965 3125 3285 3445 3605 3765 3925 4085 4245 4405 4565 4725 1686 1846 2006 2166 2326 2486 2646 2806 2966 3126 3286 3446 3606 3766 3926 4086 4246 4406 4566 4726 1687 1847 2007 2167 2327 2487 2647 2807 3127 3287 3447 3607 3767 3927 4087 4247 4407 4567 1688 2008 2168 2488 2808 2968 3128 3288 3448 3608 3768 3928 4088 4248 4408 4568 4728 1689 1849 2009 2169 2489 2649 2809 2969 3129 3289 3449 3609 3769 3929 4089 4249 4409 4569 4729 1690 1850 2010 2170 2330 2490 2650 2810 2970 3130 3290 3450 3610 3930 4090 4250 4410 4570 4730 1691 1851 2011 2491 2651 2811 2971 3131 3291 3451 3611 3771 3931 4091 4251 4411 4571 4731 1692 1852 2012 2172 2332 2492 2652 2812 2972 3132 3292 3612 3772 3932 4092 4252 4412 4572 4732 1693 2013 2173 2333 2493 2653 2813 2973 3133 3293 3453 3613 3773 3933 4093 4253 4413 4573 4733 1694 1854 2014 2174 2334 2494 2654 2814 2974 3134 3294 3454 3614 3774 3934 4094 4254 4414 4574 4734 1695 1855 2015 2175 2335 2495 2655 2815 2975 3135 3295 3455 3615 3775 3935 4095 4255 4415 4575 4735 1696 1856 2016 2176 2336 2496 2656 2816 2976 3136 3296 3456 3616 3776 3936 4096 4256 4416 4576 4736 1697 1857 2017 2177 2337 2497 2657 2817 2977 3137 3297 3457 3617 3777 3937 4097 4257 4417 4577 4737 1698 1858 2018 2178 2498 2658 2818 2978 3138 3298 3458 3618 3778 3938 4098 4258 4418 4578 4738 1699 1859 2019 2179 2339 2499 2659 2819 2979 3139 3299 3459 3619 3779 4099 4579 4739 1700 1860 2020 2180 2340 2500 2660 2820 2980 3140 3300 3460 3620 3780 4100 4260 4420 4580 4740 1701 1861 2021 2181 2341 2501 2661 2821 2981 3141 3301 3461 3621 3781 3941 4101 4421 4581 4741 1862 2022 2182 2342 2502 2662 2982 3142 3302 3462 3622 3782 3942 4102 4262 4422 4742 1703 2183 2343 2503 2663 2823 2983 3143 3303 3463 3623 3783 3943 4103 4263 4423 4583 4743 1704 1864 2024 2184 2504 2664 2824 2984 3144 3304 3464 3624 3784 3944 4104 4264 4424 4584 4744 1705 1865 2025 2185 2345 2505 2665 2825 2985 3145 3305 3465 3625 3785 3945 4105 4265 4425 4585 4745 1706 1866 2026 2186 2346 2506 2666 2826 2986 3146 3306 3466 3626 3786 3946 4106 4266 4426 4586 4746 1707 1867 2027 2187 2347 2507 2827 2987 3147 3307 3467 3627 3787 3947 4107 4267 4427 4587 4747 1708 1868 2028 2188 2348 2508 2668 2828 2988 3148 3308 3468 3628 3788 3948 4108 4268 4428 4588 4748 1709 1869 2029 2189 2349 2509 2669 2829 2989 3149 3309 3469 3629 3789 3949 4109 4269 4429 4589 1710 1870 2030 2190 2350 2510 2670 2830 2990 3150 3310 3470 3630 3790 3950 4110 4270 4430 4590 4750 1711 1871 2031 2511 2671 2831 2991 3151 3471 3631 3791 3951 4111 4271 4431 4591 4751 1712 1872 2032 2192 2352 2672 2832 2992 3152 3312 3472 3632 3792 3952 4112 4272 4432 4592 4752 1713 1873 2033 2193 2353 2513 2673 2833 2993 3313 3473 3633 3793 3953 4273 4433 4593 1714 1874 2034 2194 2354 2514 2674 2834 2994 3154 3474 3634 3794 3954 4114 4274 4434 4594 4754 1715 1875 2035 2195 2355 2515 2675 2835 2995 3315 3475 3795 3955 4115 4275 4435 4595 4755 1716 1876 2036 2196 2356 2516 2676 2836 2996 3156 3316 3476 3636 3796 4116 4276 4436 4596 4756 1717 2037 2197 2357 2517 2677 2837 2997 3157 3317 3477 3637 3797 3957 4117 4277 4437 4597 4757 1718 1878 2038 2358 2678 2838 2998 3158 3318 3478 3638 3798 3958 4118 4278 4438 4598 4758 1719 1879 2039 2199 2359 2519 2679 2839 2999 3159 3319 3479 3639 3799 3959 4279 4439 4599 4759 1720 1880 2040 2200 2360 2520 2680 2840 3000 3160 3320 3480 3640 3800 3960 4120 4280 4440 4600 4760 1721 1881 2041 2201 2361 2521 3001 3161 3321 3481 3641 3801 3961 4121 4281 4441 4601 4761 1722 1882 2202 2362 2522 2682 2842 3002 3162 3322 3482 3642 3802 3962 4122 4282 4442 4602 4762 1883 2043 2203 2363 2523 2683 2843 3003 3163 3323 3483 3643 3803 3963 4123 4283 4443 4603 4763 1724 1884 2044 2204 2364 2524 2684 2844 3004 3164 3324 3484 3644 3804 3964 4124 4444 4604 4764 1725 1885 2045 2205 2365 2525 2685 2845 3005 3165 3325 3485 3645 3805 3965 4125 4285 4445 4605 4765 1726 1886 2046 2206 2366 2526 2686 2846 3006 3166 3326 3486 3646 3806 3966 4126 4286 4446 4606 4766 1727 1887 2047 2207 2367 2527 2687 2847 3007 3167 3327 3487 3647 3807 3967 4127 4287 4447 4607 4767 1728 1888 2208 2368 2528 2688 2848 3008 3168 3328 3488 3648 3808 3968 4128 4288 4448 4608 4768 1729 1889 2049 2209 2369 2529 2689 2849 3009 3169 3329 3489 3649 3809 3969 4129 4289 4449 4609 4769 1890 2050 2210 2370 2530 2690 2850 3010 3170 3330 3490 3650 3810 3970 4130 4290 4450 4610 4770 1731 1891 2051 2211 2371 2531 2691 2851 3011 3171 3331 3491 3651 3811 3971 4131 4291 4451 4611 4771 1732 1892 2052 2212 2372 2532 2692 2852 3012 3172 3332 3492 3652 3812 3972 4132 4292 4452 4612 4772 1733 1893 2053 2213 2373 2533 2693 2853 3013 3173 3333 3493 3653 3813 3973 4133 4293 4453 4613 4773 1734 1894 2054 2214 2374 2534 2694 2854 3014 3174 3334 3494 3654 3814 3974 4134 4294 4454 4614 4774 1735 1895 2055 2215 2375 2535 2695 2855 3015 3335 3495 3655 3815 3975 4135 4295 4455 4615 4775 1736 1896 2056 2216 2376 2536 2696 3016 3176 3336 3496 3656 3816 4136 4296 4456 4616 4776 1737 1897 2217 2377 2537 2697 2857 3017 3177 3337 3497 3657 3817 3977 4137 4297 4457 4617 4777 1738 1898 2218 2378 2538 2698 2858 3018 3178 3338 3498 3658 3818 3978 4138 4298 4458 4618 4778 1739 1899 2059 2219 2539 2699 2859 3019 3179 3339 3499 3659 3819 3979 4139 4299 4459 4619 4779 1740 1900 2060 2220 2380 2540 2700 2860 3180 3340 3500 3660 3820 3980 4140 4300 4460 4620 4780 1741 1901 2061 2221 2381 2541 2701 2861 3021 3181 3341 3501 3661 3821 3981 4141 4301 4461 4621 4781 1742 1902 2222 2382 2542 2702 2862 3022 3182 3342 3502 3662 3822 3982 4142 4302 4462 4622 4782 1743 1903 2063 2223 2543 2703 2863 3023 3183 3343 3503 3663 3823 3983 4143 4303 4463 4623 4783 1744 1904 2064 2224 2384 2544 2704 2864 3024 3184 3344 3504 3664 3824 3984 4144 4304 4464 4624 4784 1745 1905 2065 2225 2385 2545 2705 2865 3025 3185 3345 3505 3665 3825 3985 4145 4305 4625 4785 1746 1906 2066 2226 2546 2706 2866 3026 3186 3346 3506 3666 3826 3986 4306 4466 4626 4786 1747 1907 2067 2227 2387 2547 2707 2867 3027 3347 3507 3667 3827 3987 4147 4307 4467 4627 4787 1748 1908 2068 2228 2388 2548 2708 2868 3188 3348 3508 3668 3828 3988 4148 4308 4468 4628 4788 1749 1909 2069 2229 2389 2549 2709 2869 3029 3189 3509 3669 3829 3989 4149 4309 4469 4629 4789 1750 1910 2070 2230 2550 2710 2870 3030 3190 3350 3510 3670 3830 3990 4150 4310 4470 4630 4790 1751 1911 2071 2231 2391 2551 2711 2871 3031 3191 3351 3511 3671 3831 3991 4151 4311 4471 4631 4791 1752 1912 2072 2232 2392 2552 2712 2872 3032 3192 3352 3512 3672 3832 3992 4152 4312 4472 4632 4792 1753 1913 2073 2233 2393 2553 2873 3033 3193 3353 3513 3673 3833 3993 4153 4313 4473 4633 4793 1914 2074 2234 2394 2554 2714 2874 3034 3194 3354 3514 3674 3834 3994 4154 4474 4634 4794 1755 1915 2075 2235 2395 2555 2715 2875 3035 3195 3355 3515 3675 3995 4155 4315 4475 4635 4795 1756 1916 2076 2236 2556 2716 2876 3036 3196 3356 3516 3676 3836 3996 4156 4316 4476 4636 4796 1757 1917 2077 2237 2397 2557 2717 2877 3037 3197 3357 3517 3677 3837 3997 4157 4317 4477 4637 4797 1758 1918 2078 2238 2398 2558 2718 2878 3038 3198 3358 3518 3678 3838 3998 4158 4318 4478 4638 4798 1759 1919 2079 2239 2399 2559 2719 2879 3039 3199 3359 3679 3839 3999 4159 4319 4479 4639 4799)

echo Running..$ENV_NAME $AGENT_NAME $SLURM_ARRAY_TASK_ID

export OMP_NUM_THREADS=1
export MKL_NUM_THREADS=1

THESE_ERROR_RUNS=()

let "end_idx=$SLURM_ARRAY_TASK_ID+3"
for ((i=$SLURM_ARRAY_TASK_ID; i<= $end_idx; i++)); do
    THESE_ERROR_RUNS+=( ${ERROR_RUNS[$i]} )
done

increment=1

parallel --jobs 4 "source ~/sungsu_env/bin/activate; bash experiments/continuous_deep_control/slurm_scripts/run_script_template.sh $ENV_NAME $AGENT_NAME {}" ::: ${THESE_ERROR_RUNS[@]}
